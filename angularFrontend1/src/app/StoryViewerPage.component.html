<div *ngIf="!storyFetchingIsComplete || storyFetchingError" style="background-color: black; position: fixed; width:
100%; height: 100%; top: 0%; left: 0%">
    <img *ngIf="!storyFetchingIsComplete" [src]="'images/loadingAnimation.gif'" style="position: absolute; top: 50%; left: 50%;
    height: 3em; width: 3em; transform: translate(-50%, -50%); pointer-events: none"/>
</div>

<StoryViewer *ngIf="storyFetchingIsComplete && !storyFetchingError"
    [authUserId]="authUserId"
    [authUsername]="authUsername"
    [authUsernameWasProvidedInRoute]="authUsernameWasProvidedInRoute"
    [storyAuthorUsername]="storyAuthorUsername"
    [storyAuthorId]="storyAuthorId"
    [zIndex]="''"
    [orderedListOfUserIdsInStoriesSection]="[]"
    [orderedListOfUsernamesInStoriesSection]="[]"
    [orderedListOfSponsorshipStatusesInStoriesSection]="[]"
    [isFromStoriesSection]="false"
    [usersAndTheirStories]="usersAndTheirStories"
    [usersAndTheirStoryPreviews]="{}"
    [usersAndYourCurrSlideInTheirStories]="usersAndYourCurrSlideInTheirStories"
    [vidStoriesAndTheirPreviewImages]="vidStoriesAndTheirPreviewImages"
    [usersAndTheirRelevantInfo]="usersAndTheirRelevantInfo"
    [usernamesWhoseStoriesYouHaveFinished]="usernamesWhoseStoriesYouHaveFinished"
    [viewedStoryIds]="viewedStoryIds"
    (updateUsersAndTheirStories)="updateUsersAndTheirStories($event)"
    (updateUsersAndTheirStoryPreviews)="updateUsersAndTheirStoryPreviews($event)"
    (updateUsersAndYourCurrSlideInTheirStories)="updateUsersAndYourCurrSlideInTheirStories($event)"
    (updateVidStoriesAndTheirPreviewImages)="updateVidStoriesAndTheirPreviewImages($event)"
    (addUsernameToSetOfUsersWhoseStoriesYouHaveFinished)="addUsernameToSetOfUsersWhoseStoriesYouHaveFinished($event)"
    (addStoryIdToSetOfViewedStoryIds)="addStoryIdToSetOfViewedStoryIds($event)"
    (closeStoryViewer)="closeStoryViewer()"
    (showErrorPopup)="showErrorPopup($event)">
/>

<ng-container *ngIf="displayErrorPopup">
    <img (click)="closeErrorPopup()" [src]="'images/blackScreen.png'" style="position: fixed; top: 0%; left: 0%; width: 100%;
    height: 100%; opacity: 0.7"/>

    <div style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%)">
        <ErrorPopup
            [errorMessage]="errorPopupMessage"
            (closePopup)="closeErrorPopup()">
        >
        </ErrorPopup>
    </div>
</ng-container>
